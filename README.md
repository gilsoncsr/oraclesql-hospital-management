# Oracle Hospital Management System Project (Advanced and Optimized)

## Problem Description

Hospitals manage a wide array of critical operations: patient registration, appointment scheduling, lab tests, inpatient admissions, bed management, medication inventory, billing, and compliance. Managing these operations efficiently requires an optimized, scalable database that supports both OLTP (transactional) and OLAP (analytical) workloads, while maintaining data integrity and historical records for years.

The goal is to design and implement an **Oracle Database Hospital Management System** using **advanced database optimization techniques**, **security measures**, and **automation** for a real-world healthcare environment.

---

## Objectives

1. Robust relational schema covering patients, medical staff, departments, rooms, admissions, appointments, lab tests, prescriptions, medications, pharmacy stock, billing, payments, and audit logs.
2. Use **advanced Oracle features** for performance and maintainability: **partitioning, indexing strategies, materialized views, PL/SQL packages/procedures, DBMS\_SCHEDULER jobs, Oracle Text indexing, compression, and parallel processing**.
3. Implement auditing, logging, and historical data retention.
4. Provide sample data and reporting views for operational and analytical insights.

---

## Database Schema (Detailed)

### Patients

```sql
CREATE TABLE patients (
    patient_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    full_name VARCHAR2(250) NOT NULL,
    date_of_birth DATE NOT NULL,
    gender CHAR(1) CHECK (gender IN ('M','F')),
    contact_info CLOB,
    address VARCHAR2(400),
    emergency_contact CLOB,
    medical_history CLOB,
    created_at TIMESTAMP DEFAULT SYSTIMESTAMP
) TABLESPACE users;
```

### Doctors

```sql
CREATE TABLE doctors (
    doctor_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    full_name VARCHAR2(250) NOT NULL,
    role VARCHAR2(100),
    specialty VARCHAR2(150),
    department_id NUMBER,
    contact_info CLOB,
    created_at TIMESTAMP DEFAULT SYSTIMESTAMP
);
```

### Departments

```sql
CREATE TABLE departments (
    department_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR2(200) NOT NULL,
    location VARCHAR2(200)
);
```

### Rooms and Beds

```sql
CREATE TABLE rooms (
    room_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    room_number VARCHAR2(50) NOT NULL,
    bed_count NUMBER DEFAULT 1,
    location VARCHAR2(200)
);

CREATE TABLE beds (
    bed_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    room_id NUMBER REFERENCES rooms(room_id),
    bed_number VARCHAR2(10),
    is_available CHAR(1) DEFAULT 'Y' CHECK (is_available IN ('Y','N'))
);
```

### Admissions (Partitioned by Admission Date)

```sql
CREATE TABLE admissions (
    admission_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    patient_id NUMBER REFERENCES patients(patient_id),
    admission_date TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    discharge_date TIMESTAMP,
    room_id NUMBER REFERENCES rooms(room_id),
    bed_id NUMBER REFERENCES beds(bed_id),
    status VARCHAR2(30) DEFAULT 'ADMITTED',
    diagnosis CLOB,
    attending_doctor NUMBER REFERENCES doctors(doctor_id),
    created_at TIMESTAMP DEFAULT SYSTIMESTAMP
)
PARTITION BY RANGE (TRUNC(admission_date)) (
    PARTITION adm_2023 VALUES LESS THAN (TO_DATE('2024-01-01','YYYY-MM-DD')),
    PARTITION adm_2024 VALUES LESS THAN (TO_DATE('2025-01-01','YYYY-MM-DD'))
);
```

### Appointments (Partitioned by Appointment Date)

```sql
CREATE TABLE appointments (
    appointment_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    patient_id NUMBER REFERENCES patients(patient_id),
    doctor_id NUMBER REFERENCES doctors(doctor_id),
    appointment_date TIMESTAMP NOT NULL,
    status VARCHAR2(30) DEFAULT 'SCHEDULED',
    reason CLOB,
    created_at TIMESTAMP DEFAULT SYSTIMESTAMP
)
PARTITION BY RANGE (TRUNC(appointment_date)) (
    PARTITION appt_2023 VALUES LESS THAN (TO_DATE('2024-01-01','YYYY-MM-DD')),
    PARTITION appt_2024 VALUES LESS THAN (TO_DATE('2025-01-01','YYYY-MM-DD'))
);
```

### Lab Tests, Prescriptions, Medications, Pharmacy Stock

```sql
CREATE TABLE lab_tests (
    test_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    patient_id NUMBER REFERENCES patients(patient_id),
    requested_by NUMBER REFERENCES doctors(doctor_id),
    requested_at TIMESTAMP DEFAULT SYSTIMESTAMP,
    test_type VARCHAR2(200),
    results CLOB,
    status VARCHAR2(30) DEFAULT 'PENDING'
);

CREATE TABLE prescriptions (
    prescription_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    patient_id NUMBER REFERENCES patients(patient_id),
    doctor_id NUMBER REFERENCES doctors(doctor_id),
    prescribed_at TIMESTAMP DEFAULT SYSTIMESTAMP,
    medications CLOB,
    notes CLOB
);

CREATE TABLE medications (
    med_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    sku VARCHAR2(100) UNIQUE,
    name VARCHAR2(250) NOT NULL,
    description CLOB
);

CREATE TABLE pharmacy_stock (
    med_id NUMBER REFERENCES medications(med_id),
    lot_number VARCHAR2(100),
    quantity NUMBER DEFAULT 0,
    expiry_date DATE,
    last_updated TIMESTAMP DEFAULT SYSTIMESTAMP,
    PRIMARY KEY (med_id, lot_number)
);
```

### Billing and Payments

```sql
CREATE TABLE billings (
    billing_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    patient_id NUMBER REFERENCES patients(patient_id),
    amount NUMBER(12,2) NOT NULL,
    billing_date TIMESTAMP DEFAULT SYSTIMESTAMP,
    status VARCHAR2(30) DEFAULT 'OPEN'
);

CREATE TABLE payments (
    payment_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    billing_id NUMBER REFERENCES billings(billing_id),
    paid_at TIMESTAMP DEFAULT SYSTIMESTAMP,
    amount NUMBER(12,2) NOT NULL,
    method VARCHAR2(50)
);
```

### Audit Log

```sql
CREATE TABLE audit_log (
    audit_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    table_name VARCHAR2(128),
    operation VARCHAR2(10),
    changed_by NUMBER,
    change_time TIMESTAMP DEFAULT SYSTIMESTAMP,
    row_data CLOB
);
```

---

## Advanced Optimizations

* **Partitioning:** Range partitions by date for ADMISSIONS and APPOINTMENTS.
* **Indexes:** Function-based, bitmap, global/local indexes.
* **Materialized Views:** Fast refresh dashboards for occupancy and revenue.
* **PL/SQL Packages:** Admission, discharge, appointment scheduling, billing automation.
* **Oracle Text:** Full-text search on medical notes.
* **Compression & Archival:** Historical data compression and partition exchange.
* **Parallel Query & DML:** Accelerate analytical queries and batch operations.
* **DBMS\_SCHEDULER:** Jobs for statistics, MV refresh, audit cleanup, and archival.
* **Audit Logging:** Autonomous transaction-based logging.

---

## Sample Data and Procedures

```sql
-- Patients, Doctors, Appointments
INSERT INTO patients(full_name, date_of_birth, gender) VALUES ('John Doe', DATE '1980-05-12', 'M');
INSERT INTO patients(full_name, date_of_birth, gender) VALUES ('Jane Smith', DATE '1990-07-24', 'F');
INSERT INTO doctors(full_name, specialty) VALUES ('Dr. Alice Brown', 'Cardiology');
INSERT INTO doctors(full_name, specialty) VALUES ('Dr. Bob White', 'Neurology');

-- Schedule Appointment Example
DECLARE
    v_appt_id NUMBER;
BEGIN
    v_appt_id := hospital_pkg.schedule_appointment(1, 1, SYSTIMESTAMP + INTERVAL '2' DAY);
    DBMS_OUTPUT.PUT_LINE('Appointment created: ' || v_appt_id);
END;
/
```

---

## Maintenance & Tuning

* Gather statistics regularly using `DBMS_STATS`.
* Monitor AWR, ASH, and Enterprise Manager.
* Apply SQL Plan Management for query stability.
* Use parallel DML and queries for large-scale operations.
* Enable automatic indexing (Oracle 19c+).
* Archive old partitions and compress historical data.
* DBMS\_SCHEDULER jobs for nightly refresh of MVs, audit cleanup, and data archival.

---

## Deployment Example (Docker)

```yaml
version: '3.9'
services:
  oracle-db:
    image: gvenzl/oracle-xe:21-slim
    ports:
      - "1521:1521"
    environment:
      ORACLE_PASSWORD: mypassword
    volumes:
      - oracle-data:/opt/oracle/oradata
volumes:
  oracle-data:
```

---

## Conclusion

This project demonstrates a **comprehensive Oracle Database implementation** for a Hospital Management System with advanced optimization strategies, ensuring **high performance, scalability, data integrity, and maintainability** for transactional and analytical workloads over large healthcare datasets.
